@page "/register"
@using System.ComponentModel.DataAnnotations
@using Microsoft.AspNetCore.Components.Forms

<EditForm Model="this" OnValidSubmit="HandleRegister" FormName="RegisterForm">
    <DataAnnotationsValidator />
    <ValidationSummary class="text-danger" />

    <div class="form-group mb-3">
        <label>Email</label>
        <InputText class="form-control" @bind-Value="Email" />
        <ValidationMessage For="@(() => Email)" class="text-danger" />
    </div>

    <div class="form-group mb-3">
        <label>Passwort</label>
        <InputText class="form-control" type="password" @bind-Value="Password" />
        <ValidationMessage For="@(() => Password)" class="text-danger" />
    </div>

    <div class="form-group mb-3">
        <label>Passwort bestätigen</label>
        <InputText class="form-control" type="password" @bind-Value="ConfirmPassword" />
        <ValidationMessage For="@(() => ConfirmPassword)" class="text-danger" />
    </div>

    <button type="submit" class="btn btn-primary">Registrieren</button>
</EditForm>

@code {
    [Required(ErrorMessage = "Email ist erforderlich")]
    [EmailAddress(ErrorMessage = "Ungültige Emailadresse")]
    public string Email { get; set; }

    [Required(ErrorMessage = "Passwort ist erforderlich")]
    [MinLength(6, ErrorMessage = "Passwort muss mindestens 6 Zeichen lang sein")]
    public string Password { get; set; }

    [Required(ErrorMessage = "Bitte Passwort bestätigen")]
    [Compare(nameof(Password), ErrorMessage = "Passwörter stimmen nicht überein")]
    public string ConfirmPassword { get; set; }

    private void HandleRegister()
    {
        Console.WriteLine($"Email: {Email}");
        Console.WriteLine("Registration erfolgreich!");
    }
}